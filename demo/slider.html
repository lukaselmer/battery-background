<!doctype html>

<html lang="en">
<head>
    <meta charset="utf-8"/>
    <title></title>
    <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.0/themes/base/jquery-ui.css"/>
    <script src="http://code.jquery.com/jquery-1.8.3.js"></script>
    <script src="http://code.jquery.com/ui/1.10.0/jquery-ui.js"></script>
    <script src="rgbcolor.js"></script>
    <script src="ColoredObject.js"></script>
    <script>
        $(function () {
            $("#slider").slider({
                orientation: "horizontal",
                max: 100,
                value: 100,
                slide: on_slider_changed,
                change: on_slider_changed
            });

            var body = $("body")
            body.wrapInner("<div id='battery-background-inlay' />")
            var bbi = $("#battery-background-inlay")
            var style = css(body);
            bbi.css(style);

            body.css({ width: '100% !important', height: '100% !important', margin: 0})
            body.css({background: "#00000"})

        });
        //
        //        function ColorLuminance(color, lum) {
        //
        //            console.log(color.toRGB() + ', ' + lum)
        //
        //            lum = lum || 1;
        //
        //            var avg = (color.r + color.g + color.b ) / 3;
        //            var do_complement = (lum < 0.5 && avg < 100);
        //
        //            var illuminate = function (colcomp_before) {
        //                //return Math.round(Math.min(Math.max(0, colcomp_before + (colcomp_before * lum)), 255));
        //                var correction = 0;
        //
        //                if (do_complement) {
        //                    correction = 255;
        //                }          else {
        //                }
        //
        //                return Math.round(Math.min(Math.max(0, correction + colcomp_before - (255 *  (1 - lum))), 255));
        //            }
        //
        //            var rgb = [illuminate(color.r, lum), illuminate(color.g, lum), illuminate(color.b, lum)];
        //
        //
        //            console.log(rgb);
        //            color = new RGBColor('');
        //
        //            color.r = rgb[0];
        //            color.g = rgb[1];
        //            color.b = rgb[2];
        //
        //            console.log(color.toRGB() + "\n\n");
        //            return color.toRGB();
        //        }
        //
        function on_slider_changed() {
            var val = $("#slider").slider("value") / 100;
            updateColors(val);
        }
        //
        function updateColors(factor) {

//            $(window.colored_objects).each(function () {
//                console.log(this);
//                this.object.css("background-color", ColorLuminance(this.original_background, factor));
//                this.object.css("color", ColorLuminance(this.original_foreground, factor));
//            });

            var bbi = $("#battery-background-inlay")
            bbi.fadeTo(100, factor);
        }

    </script>
</head>
<body style="background-color: #2b81af;">

    <h1 style="">Test</h1>


    <div id="slider"></div>

    <button onclick="updateColors(0.1)">Lighter</button>
    <button onclick="updateColors(-0.1)">Darker</button>


</body>
</html>